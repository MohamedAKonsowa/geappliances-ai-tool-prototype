{
  "title": "CSV Topic Guesser",
  "description": "A lightweight internal tool that lets users upload a CSV file and automatically generates a concise guess of the file's subject or domain using the built-in AI helper. No predefined schema required.",
  "pages": [
    {
      "name": "Home",
      "purpose": "Provide file upload, preview first few rows, show AI-generated topic guess, and allow re‑analysis."
    }
  ],
  "ui_components": [
    "File input button",
    "Table preview (first 5 rows)",
    "Loading spinner",
    "Result card with guessed topic",
    "Retry button",
    "Error toast (SweetAlert2)"
  ],
  "libraries": [
    "Papa Parse for CSV parsing",
    "Tailwind CSS for styling",
    "DaisyUI for ready‑made components",
    "SweetAlert2 for pop‑ups",
    "lodash for data manipulation (optional)",
    "window.geaRuntimeLLM for AI inference",
    "window.geaRuntimeStore for persisting last guess"
  ],
  "state": [
    "csvFile: File | null",
    "parsedData: Array<Object> | null",
    "previewRows: Array<Object> (first 5 rows)",
    "guessResult: string | null",
    "isLoading: boolean",
    "errorMessage: string | null"
  ],
  "interactions": [
    "User selects a CSV file → store in csvFile.",
    "On file change, Papa Parse reads the file (header detection, dynamic typing).",
    "First 5 rows are saved to previewRows and displayed in a Tabulator‑style table.",
    "After successful parse, UI shows a 'Analyze' button.",
    "When user clicks 'Analyze', set isLoading=true, clear previous result, and call: const prompt = `Given the following CSV data (first 100 rows only), infer the most likely subject or business domain of this dataset and return a short description (max 15 words). Data: ${JSON.stringify(parsedData.slice(0,100))}`; const response = await window.geaRuntimeLLM(prompt);",
    "Store response in guessResult, persist via window.geaRuntimeStore.set('lastGuess', response).",
    "Display guessResult in a result card. Turn off loading spinner.",
    "If AI call fails, show errorMessage via SweetAlert2.",
    "Retry button clears state and allows new file upload.",
    "On app load, attempt to retrieve lastGuess from store and show as “Previous guess”."
  ],
  "acceptance_criteria": [
    "User can upload any .csv file up to 5 MB.",
    "CSV is parsed without requiring a predefined schema; headers are auto‑detected.",
    "First five rows are displayed in a readable table.",
    "AI inference runs automatically after parsing or on user request and returns a one‑sentence guess of the dataset’s topic.",
    "Result is shown prominently; loading indicator appears while waiting for AI.",
    "Errors (invalid CSV, AI failure) are presented via SweetAlert2 toast.",
    "Last successful guess persists across sessions using geaRuntimeStore.",
    "All functionality works within the sandboxed iframe without external network calls except the permitted AI helper."
  ],
  "recommended_models": {
    "coder": "llama-3.1-8b-instant",
    "critic": "llama-3.1-8b-instant",
    "runtime": "llama-3.1-8b-instant"
  }
}